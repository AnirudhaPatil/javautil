<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_65) on Tue Aug 26 13:25:26 EDT 2014 -->
<title>FileHashMap (javautil 3.1.2 API)</title>
<meta name="date" content="2014-08-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FileHashMap (javautil 3.1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/clapper/util/misc/EnumerationIterator.html" title="class in org.clapper.util.misc"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/clapper/util/misc/LRUMap.html" title="class in org.clapper.util.misc"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/clapper/util/misc/FileHashMap.html" target="_top">Frames</a></li>
<li><a href="FileHashMap.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_java.util.AbstractMap">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.clapper.util.misc</div>
<h2 title="Class FileHashMap" class="title">Class FileHashMap&lt;K,V&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.util.AbstractMap&lt;K,V&gt;</li>
<li>
<ul class="inheritance">
<li>org.clapper.util.misc.FileHashMap&lt;K,V&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.util.Map&lt;K,V&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">FileHashMap&lt;K,V&gt;</span>
extends java.util.AbstractMap&lt;K,V&gt;</pre>
<div class="block"><p><tt>FileHashMap</tt> implements a <tt>java.util.Map</tt> that keeps
 the keys in memory, but stores the values as serialized objects in a
 random access disk file. When an application attempts to access the
 value associated with a given key, the <tt>FileHashMap</tt> object
 determines the location of the serialized value object, seeks to that
 location in the random access file, and reads and deserializes the value
 object. In a sense, a <tt>FileHashMap</tt> is akin to a simple, classic
 indexed sequential file. This approach gives a <tt>FileHashMap</tt>
 object the following characteristics:</p>

 <ul>
   <li>Because the map keys are cached in memory, access to the key space is
       relatively efficient.
   <li>Since the values are stored in a file, access to the values is
       slower than if they were in memory, but you can store a lot
       more data in a <tt>FileHashMap</tt> object than in a wholly
       memory-resident object, such as a <tt>HashMap</tt> or
       <tt>TreeMap</tt>.
 </ul>

 <p><b>File Name Conventions</b></p>

 <p>A <tt>FileHashMap</tt> is instantiated with a base file name (i.e., a
 file name without an extension). This base file name specifies the path
 to the file(s) that used to store the map's data; the
 <tt>FileHashMap</tt> tacks the following extensions onto the prefix to
 arrive at the actual file names.</p>

 <blockquote>
 <table border="1">
   <tr valign="top">
     <th>Extension</th>
     <th>Meaning</th>
   </tr>

   <tr valign="top">
     <td>.ix</td>
     <td>The saved in-memory index. This file is created only if the
         <tt>FileHashMap</tt> is not marked as transient. (See below.)
         The <a href="../../../../org/clapper/util/misc/FileHashMap.html#INDEX_FILE_SUFFIX"><code><tt>INDEX_FILE_SUFFIX</tt></code></a>
         constant defines this string.</td>
   </tr>

   <tr valign="top">
     <td>.db</td>
     <td>The on-disk data (value) file, where the serialized objects are
         stored.
         The <a href="../../../../org/clapper/util/misc/FileHashMap.html#DATA_FILE_SUFFIX"><code><tt>DATA_FILE_SUFFIX</tt></code></a>
         constant defines this string.</td>
   </tr>
 </table>
 </blockquote>

 <p>For instance, if you create a <tt>FileHashMap</tt> with the
 statement</p>

 <blockquote><pre>
 Map map = new FileHashMap("/tmp/mymap");
 </pre></blockquote>

 <p>the serialized value objects will be stored in file "/tmp/mymap.db",
 and the index (if saved) will be stored in "/tmp/mymap.ix".</p>

 <p><b>Transient versus Persistent Maps</b></p>

 <p>A <tt>FileHashMap</tt> is persistent by default. When a
 <tt>FileHashMap</tt> object is finalized or explicitly closed
 (using the <a href="../../../../org/clapper/util/misc/FileHashMap.html#close()"><code>close()</code></a> method), its in-memory index is saved
 to disk. You can reopen the saved map by instantiating another
 <tt>FileHashMap</tt> object, and specifying the same file prefix. The
 new <tt>FileHashMap</tt> object will load its initial in-memory index
 from the saved index; any modifications to the new object will be
 written back to the on-disk index with the new object finalized or
 closed.</p>

 <p>A <tt>FileHashMap</tt> can be marked as non-persistent, or transient,
 by passing the <a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code><tt>TRANSIENT</tt></code></a> flag to the
 constructor. A transient map is not saved; its disk files are
 removed when the map is finalized or manually closed. You cannot create
 a transient map using a file prefix that specifies an existing, saved
 map. That is, the disk files for a transient map must not exist at the
 time the map is created.</p>

 <p><b>Optimizations</b></p>

 <p>The <tt>FileHashMap</tt> class attempts to optimize access to the
 disk-resident values and to conserve memory use. These optimizations
 include the following specific measures.</p>

 <p><u>Sequential access to values</u></p>

 <p>The iterators attempt to minimize file seeking while looping over the
 stored values. The <a href="../../../../org/clapper/util/misc/FileHashMap.html#values()"><code>values()</code></a> method returns a
 <tt>Set</tt> whose iterator loops through the values in the order they
 were written to the data file. Traversing the value set via the iterator
 will access the <tt>FileHashMap</tt>'s data file sequentially, from top
 to bottom. For example, the following code fragment loops through a
 <tt>FileHashMap</tt>'s values; because the iterator returns the values
 in the order they appear in the data file, the code fragment accesses
 the data file sequentially:</p>

 <blockquote><pre>
 FileHashMap map = new FileHashMap("myfile");

 for (Iterator values = map.values().iterator(); values.hasNext(); )
 {
     Object value = it.next();
     System.out.println(value);
 }
 </pre></blockquote>

 <p>Similarly, the <tt>Set</tt> objects returned by the
 <a href="../../../../org/clapper/util/misc/FileHashMap.html#keySet()"><code>keySet()</code></a> and <a href="../../../../org/clapper/util/misc/FileHashMap.html#entrySet()"><code>entrySet()</code></a>
 methods use iterators that return the keys in the order that
 the associated values appear in the disk file. For example, the following
 code fragment also accesses the data file sequentially:</p>

 <blockquote><pre>
 FileHashMap map = new FileHashMap("myfile");

 for (Iterator keys = map.keySet().iterator(); keys.hasNext(); )
 {
     Object key   = it.next();
     Object value = map.get(key);
     System.out.println("key=" + key + ", value=" + value);
 }
 </pre></blockquote>

 <p>Note that this optimization strategy can be foiled in a number of
 ways. For instance, the sequential access behavior can be thwarted if a
 second thread is accessing the map while the first thread is iterating
 over it, or if the thread that's iterating over the values is
 simultaneously inserting values in the table.</p>

 <p>Accessing the keys, without reading the values, does not result in
 any file access at all, because the keys are cached in memory. See
 the next section for more details.</p>

 <p><u>Memory Conservation</u></p>

 <p>The values stored in the map are serialized and written to a data
 file; they are not cached in memory at all. Therefore, you can store
 a lot more objects in a <tt>FileHashMap</tt> before running out of
 memory (assuming you have enough disk space available).</p>

 <p>The keys <i>are</i> stored in memory, however. Each key is associated
 with a special internal object that keeps track of the location and
 length of the associated value in the disk file. As you place more items
 in a <tt>FileHashMap</tt>, the index will grow, consuming memory. But it
 will consume far less memory than if you use an in-memory <tt>Map</tt>,
 such as a <tt>java.util.HashMap</tt>, which stores the keys <i>and</i>
 the values in memory.

 <p>The <tt>Iterator</tt> and <tt>Set</tt> objects returned by the
 <a href="../../../../org/clapper/util/misc/FileHashMap.html#entrySet()"><code>entrySet()</code></a> and <a href="../../../../org/clapper/util/misc/FileHashMap.html#values()"><code>values()</code></a>
 methods contain proxy objects, not real values. That is, they do
 <i>not</i> actually contain any values. Instead, they contain proxies
 for the values, objects that specify the locations of the values in the
 disk file. A value is loaded from disk only when you actually attempt to
 retrieve it from the <tt>Iterator</tt> or <tt>Set</tt>.

 <p><b>Reclaiming Gaps in the File</b></p>

 <p>Normally, when you remove an object from the map, the space where the
 object was stored in the data file is not reclaimed. This strategy allows
 for faster insertions, since new objects are always added to the end of
 the disk file. However, for long-lived <tt>FileHashMap</tt> objects that
 are periodically modified, this strategy may not be appropriate. For that
 reason, you can pass a special <a href="../../../../org/clapper/util/misc/FileHashMap.html#RECLAIM_FILE_GAPS"><code>RECLAIM_FILE_GAPS</code></a> flag to the
 constructor. If specified, the flag tells the object to keep track of
 "gaps" in the file, and reuse them if possible. When a new object is
 inserted into the map, and <a href="../../../../org/clapper/util/misc/FileHashMap.html#RECLAIM_FILE_GAPS"><code>RECLAIM_FILE_GAPS</code></a> is enabled, the
 object will attempt to find the smallest unused area in the file to
 accommodate the new object. It will only add the new object to the end
 of the file (enlarging the file) if it cannot find a suitable gap.</p>

 <p>This mode is not the default, because it can add time to processing.
 However, it does not access the file at all; the file gap maintenance
 logic uses in-memory data only. So, while it adds a small amount of
 computational overhead, the difference between running with
 <a href="../../../../org/clapper/util/misc/FileHashMap.html#RECLAIM_FILE_GAPS"><code>RECLAIM_FILE_GAPS</code></a> enabled and running with it disabled should not
 be dramatic.</p>

 <p><b>Restrictions</b></p>

 <p>This class currently has the following restrictions and unimplemented
 behavior.</p>

 <ul>
   <li>An object cannot be stored in a <tt>FileHashMap</tt> unless it
       implements <tt>java.io.Serializable</tt>.
   <li>The maximum size of a serialized stored object is confined to
       a 32-bit integer. This restriction is unlikely to cause anyone
       problems, and it keeps the keyspace down.
   <li>To prevent multiple Java VMs from updating the file containing the
       serialized values, this class detect throws an exception if it
       detects an attempted concurrent modification of a map. (Locking
       the map, then synchronizing the in-memory indexes across multiple
       updaters, is non-trivial. The most obvious method that leaps to
       mind, mapping the underlying <tt>java.nio.channels.FileChannel</tt>
       object to map the index file into memory, isn't guaranteed to work.
       Cccording to the JDK documentation, "Whether changes made to the
       content or size of the underlying file, by this program or another,
       are propagated to the [mapped memory] buffer is unspecified. The rate
       at which changes to the buffer are propagated to the file is
       unspecified.")
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_java.util.AbstractMap">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;java.util.AbstractMap</h3>
<code>java.util.AbstractMap.SimpleEntry&lt;K,V&gt;, java.util.AbstractMap.SimpleImmutableEntry&lt;K,V&gt;</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_java.util.Map">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;java.util.Map</h3>
<code>java.util.Map.Entry&lt;K,V&gt;</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#DATA_FILE_SUFFIX">DATA_FILE_SUFFIX</a></strong></code>
<div class="block">Data file suffix.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#FORCE_OVERWRITE">FORCE_OVERWRITE</a></strong></code>
<div class="block">Constructor flag value: Ignored unless <a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code>TRANSIENT</code></a> is also
 specified, <tt>FORCE_OVERWRITE</tt> tells the constructor to
 overwrite the on-disk files if they already exist, instead of
 throwing an exception.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#INDEX_FILE_SUFFIX">INDEX_FILE_SUFFIX</a></strong></code>
<div class="block">Index file suffix.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#NO_CREATE">NO_CREATE</a></strong></code>
<div class="block">Constructor flag value: If specified, the disk files will not be
 created if they don't exist; instead, the constructor will throw an
 exception.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#RECLAIM_FILE_GAPS">RECLAIM_FILE_GAPS</a></strong></code>
<div class="block">Constructor flag value: Tells the object to reclaim unused space in
 the file, whenever possible.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT">TRANSIENT</a></strong></code>
<div class="block">Constructor flag value: If specified, the on-disk hash table is
 considered to be transient and will be removed when this object is
 closed or finalized.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap()">FileHashMap</a></strong>()</code>
<div class="block">Create a new transient <tt>FileHashMap</tt> object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String)">FileHashMap</a></strong>(java.lang.String&nbsp;tempFilePrefix)</code>
<div class="block">Create a new transient <tt>FileHashMap</tt> object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String,%20int)">FileHashMap</a></strong>(java.lang.String&nbsp;pathPrefix,
           int&nbsp;flags)</code>
<div class="block">Create a new <tt>FileHashMap</tt> object that will read its data
 from and/or store its data in files derived from the specified
 prefix.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#clear()">clear</a></strong>()</code>
<div class="block">Removes all mappings from this map.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#close()">close</a></strong>()</code>
<div class="block">Close this map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#containsKey(java.lang.Object)">containsKey</a></strong>(java.lang.Object&nbsp;key)</code>
<div class="block">Returns <tt>true</tt> if this map contains a mapping for the
 specified key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#containsValue(java.lang.Object)">containsValue</a></strong>(java.lang.Object&nbsp;value)</code>
<div class="block">Returns <tt>true</tt> if this map maps one or more keys that are
 mapped to the specified value.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#delete()">delete</a></strong>()</code>
<div class="block">Deletes the files backing this <tt>FileHashMap</tt>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;java.util.Map.Entry&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#entrySet()">entrySet</a></strong>()</code>
<div class="block">Returns a "thin" set view of the mappings contained in this map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#equals(java.lang.Object)">equals</a></strong>(java.lang.Object&nbsp;o)</code>
<div class="block">Compares the specified object with this map for equality.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#finalize()">finalize</a></strong>()</code>
<div class="block">Finalizer</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#get(java.lang.Object)">get</a></strong>(java.lang.Object&nbsp;key)</code>
<div class="block">Returns the value associated with the the specified key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#hashCode()">hashCode</a></strong>()</code>
<div class="block">Returns the hash code value for this map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#isValid()">isValid</a></strong>()</code>
<div class="block">Determine whether the <tt>FileHashMap</tt> is valid or not.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#keySet()">keySet</a></strong>()</code>
<div class="block">Returns a <tt>Set</tt> containing all the keys in this map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#put(K,%20V)">put</a></strong>(<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>&nbsp;key,
   <a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&nbsp;value)</code>
<div class="block">Associates the specified value with the specified key in this map.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#remove(java.lang.Object)">remove</a></strong>(java.lang.Object&nbsp;key)</code>
<div class="block">Removes the mapping for this key from this map, if present.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#save()">save</a></strong>()</code>
<div class="block">Save any in-memory index changes to disk without closing the map.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#size()">size</a></strong>()</code>
<div class="block">Returns the number of key-value mappings in this map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/clapper/util/misc/FileHashMap.html#values()">values</a></strong>()</code>
<div class="block">Returns a collection view of the values contained in this map.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.util.AbstractMap">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.util.AbstractMap</h3>
<code>clone, isEmpty, putAll, toString</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>getClass, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="INDEX_FILE_SUFFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INDEX_FILE_SUFFIX</h4>
<pre>public static final&nbsp;java.lang.String INDEX_FILE_SUFFIX</pre>
<div class="block">Index file suffix.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.clapper.util.misc.FileHashMap.INDEX_FILE_SUFFIX">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DATA_FILE_SUFFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DATA_FILE_SUFFIX</h4>
<pre>public static final&nbsp;java.lang.String DATA_FILE_SUFFIX</pre>
<div class="block">Data file suffix.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.clapper.util.misc.FileHashMap.DATA_FILE_SUFFIX">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="NO_CREATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_CREATE</h4>
<pre>public static final&nbsp;int NO_CREATE</pre>
<div class="block">Constructor flag value: If specified, the disk files will not be
 created if they don't exist; instead, the constructor will throw an
 exception. By default, if the files don't exist, the constructor
 creates them.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.clapper.util.misc.FileHashMap.NO_CREATE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="TRANSIENT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TRANSIENT</h4>
<pre>public static final&nbsp;int TRANSIENT</pre>
<div class="block">Constructor flag value: If specified, the on-disk hash table is
 considered to be transient and will be removed when this object is
 closed or finalized. Note that this flag cannot be combined with
 <a href="../../../../org/clapper/util/misc/FileHashMap.html#NO_CREATE"><code>NO_CREATE</code></a>. Also, if <tt>TRANSIENT</tt> is specified to the
 constructor, but the on-disk files already exist, the constructor
 will throw an exception unless <a href="../../../../org/clapper/util/misc/FileHashMap.html#FORCE_OVERWRITE"><code>FORCE_OVERWRITE</code></a> is also
 specified.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.clapper.util.misc.FileHashMap.TRANSIENT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FORCE_OVERWRITE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORCE_OVERWRITE</h4>
<pre>public static final&nbsp;int FORCE_OVERWRITE</pre>
<div class="block">Constructor flag value: Ignored unless <a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code>TRANSIENT</code></a> is also
 specified, <tt>FORCE_OVERWRITE</tt> tells the constructor to
 overwrite the on-disk files if they already exist, instead of
 throwing an exception.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.clapper.util.misc.FileHashMap.FORCE_OVERWRITE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="RECLAIM_FILE_GAPS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RECLAIM_FILE_GAPS</h4>
<pre>public static final&nbsp;int RECLAIM_FILE_GAPS</pre>
<div class="block">Constructor flag value: Tells the object to reclaim unused space in
 the file, whenever possible. If this flag is not specified, then the
 space occupied by objects removed from the hash table is not
 reclaimed. This flag is not persistent. It's possible to create a
 persistent <tt>FileHashMap</tt> without using this flag, and later
 reopen the on-disk map via a new <tt>FileHashMap</tt> object that
 does have this flag set. Whenever the flag is set, the in-memory
 <tt>FileHashMap</tt> object attempts to reuse gaps in the file. When
 the flag is not set, the in-memory <tt>FileHashMap</tt> object
 ignores gaps in the file.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.clapper.util.misc.FileHashMap.RECLAIM_FILE_GAPS">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileHashMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FileHashMap</h4>
<pre>public&nbsp;FileHashMap()
            throws java.io.IOException</pre>
<div class="block"><p>Create a new transient <tt>FileHashMap</tt> object. The transient
 disk files will be in the normal temporary directory and will have
 the prefix "FileHashMap". The names of the associated disk files are
 guaranteed to be unique, and will go away when the object is
 finalized or when the Java VM goes away. Call this constructor is
 identical to calling <a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String)"><code>FileHashMap(String)</code></a> with a null
 <tt>filePrefix</tt> parameter.</p>

 <p>Note that this constructor implicitly sets the <a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code>TRANSIENT</code></a>
 flag.</p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Unable to create temp file</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String,%20int)"><code>FileHashMap(String,int)</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String)"><code>FileHashMap(String)</code></a></dd></dl>
</li>
</ul>
<a name="FileHashMap(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FileHashMap</h4>
<pre>public&nbsp;FileHashMap(java.lang.String&nbsp;tempFilePrefix)
            throws java.io.IOException</pre>
<div class="block"><p>Create a new transient <tt>FileHashMap</tt> object. The transient
 disk files will be in the normal temporary directory and will have
 the specified temporary file prefix. If no temporary file prefix is
 specified (i.e., the <tt>tempFilePrefix</tt> parameter is null), then
 "fhm" will be used. The names of the associated disk files are
 guaranteed to be unique, and they will go away when the object is
 finalized or when the Java VM goes away.</p>

 <p>Note that this constructor implicitly sets the <a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code>TRANSIENT</code></a>
 flag.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tempFilePrefix</code> - the prefix to use with the temporary file, or
                       null for default prefix "fhm"</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Unable to create temp file</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String,%20int)"><code>FileHashMap(String,int)</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap()"><code>FileHashMap()</code></a></dd></dl>
</li>
</ul>
<a name="FileHashMap(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileHashMap</h4>
<pre>public&nbsp;FileHashMap(java.lang.String&nbsp;pathPrefix,
           int&nbsp;flags)
            throws java.io.FileNotFoundException,
                   <a href="../../../../org/clapper/util/misc/ObjectExistsException.html" title="class in org.clapper.util.misc">ObjectExistsException</a>,
                   java.lang.ClassNotFoundException,
                   <a href="../../../../org/clapper/util/misc/VersionMismatchException.html" title="class in org.clapper.util.misc">VersionMismatchException</a>,
                   java.io.IOException</pre>
<div class="block"><p>Create a new <tt>FileHashMap</tt> object that will read its data
 from and/or store its data in files derived from the specified
 prefix. The prefix is a file prefix onto which data and index
 suffixes will be appended.</p>

 <p><u>Values for the <tt>flag</tt> parameter</u></p>

 <p>The <tt>flags</tt> parameter consists of a set of logically OR'd
 constants.

 <p>If <tt>(flags & NO_CREATE)</tt> is zero, the constructor will
 attempt to create the index files if they don't exist. Otherwise, it
 expects to find a saved hash map, and it will throw an exception if
 the files are not present.</p>

 <p>If <tt>(flags & TRANSIENT)</tt> is non-zero, the constructor will
 attempt to create a transient map. A transient map is not saved; its
 disk files are removed when the map is finalized or manually closed.
 You cannot create a transient map using a file prefix that specifies
 an existing, saved map. Specifying the <tt>TRANSIENT</tt> flag
 causes any <tt>NO_CREATE</tt> flag to be ignored.</p>

 <p>For example, the following statement creates a transient
 <tt>FileHashMap</tt>:</p>

 <blockquote><pre>
 Map map = new FileHashMap ("/my/temp/dir", FileHashMap.TRANSIENT);
 </pre></blockquote>

 <p>whereas this statements opens a persistent <tt>FileHashMap</tt>,
 creating it if it doesn't already exist:</p>

 <blockquote><pre>
 Map map = new FileHashMap ("/my/map/dir", FileHashMap.CREATE);
 </pre></blockquote></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pathPrefix</code> - The pathname prefix to the files to be used</dd><dd><code>flags</code> - Flags that control the disposition of the files.
                     A value of 0 means no flags are set. See above
                     for details.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.FileNotFoundException</code> - The specified hash files do not
                                      exist, and the <a href="../../../../org/clapper/util/misc/FileHashMap.html#NO_CREATE"><code>NO_CREATE</code></a>
                                      flag was specified.</dd>
<dd><code>java.lang.ClassNotFoundException</code> - Failed to deserialize an object</dd>
<dd><code><a href="../../../../org/clapper/util/misc/VersionMismatchException.html" title="class in org.clapper.util.misc">VersionMismatchException</a></code> - Bad or unsupported version stamp
                                      in <tt>FileHashMap</tt> index file</dd>
<dd><code><a href="../../../../org/clapper/util/misc/ObjectExistsException.html" title="class in org.clapper.util.misc">ObjectExistsException</a></code> - One or both of the files already
                                      exist, but the <a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code>TRANSIENT</code></a>
                                      flag was set and the
                                      <a href="../../../../org/clapper/util/misc/FileHashMap.html#FORCE_OVERWRITE"><code>FORCE_OVERWRITE</code></a> flag was
                                      <i>not</i> set.</dd>
<dd><code>java.io.IOException</code> - Other errors</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#NO_CREATE"><code>NO_CREATE</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#TRANSIENT"><code>TRANSIENT</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap()"><code>FileHashMap()</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#FileHashMap(java.lang.String)"><code>FileHashMap(String)</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()
                 throws java.lang.Throwable</pre>
<div class="block">Finalizer</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>throwable</code> - on error</dd>
<dd><code>java.lang.Throwable</code></dd></dl>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block"><p>Removes all mappings from this map. The data file is cleared by
 closing it, deleting it, and reopening it. If an I/O error occurs at
 any point, this object will be closed and marked invalid.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>clear</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>clear</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws java.io.NotSerializableException,
                  java.io.IOException</pre>
<div class="block"><p>Close this map. If the map is not marked as transient, this method
 saves the index to disk. Otherwise, it removes both the index file
 and data file.</p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.NotSerializableException</code> - Can't save index (bug)</dd>
<dd><code>java.io.IOException</code> - Error writing index</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#save()"><code>save()</code></a></dd></dl>
</li>
</ul>
<a name="containsKey(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsKey</h4>
<pre>public&nbsp;boolean&nbsp;containsKey(java.lang.Object&nbsp;key)</pre>
<div class="block"><p>Returns <tt>true</tt> if this map contains a mapping for the
 specified key. Since the keys are cached in an in-memory index, this
 method does not have to access the data file, and is fairly
 cheap.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>containsKey</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>containsKey</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key whose presence in this map is to be tested</dd>
<dt><span class="strong">Returns:</span></dt><dd><tt>true</tt> if this map contains a mapping for the specified
         key, <tt>false</tt> otherwise.</dd></dl>
</li>
</ul>
<a name="containsValue(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsValue</h4>
<pre>public&nbsp;boolean&nbsp;containsValue(java.lang.Object&nbsp;value)</pre>
<div class="block"><p>Returns <tt>true</tt> if this map maps one or more keys that are
 mapped to the specified value. Because it must iterate through some
 portion of the on-disk value set, this method can be slow.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>containsValue</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>containsValue</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>value</code> - value whose presence in this map is to be tested.</dd>
<dt><span class="strong">Returns:</span></dt><dd><tt>true</tt> if this map maps one or more keys to the
         specified value, <tt>false</tt> otherwise.</dd></dl>
</li>
</ul>
<a name="delete()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete()</pre>
<div class="block">Deletes the files backing this <tt>FileHashMap</tt>. This method
 implicitly calls <a href="../../../../org/clapper/util/misc/FileHashMap.html#close()"><code>close()</code></a>.</div>
</li>
</ul>
<a name="entrySet()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entrySet</h4>
<pre>public&nbsp;java.util.Set&lt;java.util.Map.Entry&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;&gt;&nbsp;entrySet()</pre>
<div class="block"><p>Returns a "thin" set view of the mappings contained in this map.
 Each element in the returned set is a <tt>Map.Entry</tt>; each
 <tt>Map.Entry</tt> contains a key and a proxy for the associated value.
 The map's values themselves are not loaded into memory until requested
 via a call to <tt>Map.Entry.getValue()</tt>.</p>

 <p>The set is backed by the map, so changes to the map are reflected
 in the set. If the map is modified while an iteration over the set
 is in progress, the results of the iteration are undefined. Neither
 the set nor its associated iterator supports any of the
 set-modification methods (e.g., <tt>add()</tt>, <tt>remove()</tt>,
 etc). If you attempt to call any of those methods, the called method
 will throw an <tt>UnsupportedOperationException</tt>.</p>

 <p>NOTE: Calling this method on an invalid or closed
 <tt>FileHashMap</tt> will result in an exception.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>entrySet</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code>entrySet</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a set view of the mappings contained in this map.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#keySet()"><code>keySet()</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#values()"><code>values()</code></a>, 
<code>UnsupportedOperationException</code></dd></dl>
</li>
</ul>
<a name="equals(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equals</h4>
<pre>public&nbsp;boolean&nbsp;equals(java.lang.Object&nbsp;o)</pre>
<div class="block"><p>Compares the specified object with this map for equality.  Returns
 <tt>true</tt> if the given object is also a map and the two Maps
 represent the same mappings.  More formally, two maps <tt>t1</tt> and
 <tt>t2</tt> represent the same mappings if
 <tt>t1.entrySet().equals(t2.entrySet())</tt>.  This ensures that the
 <tt>equals</tt> method works properly across different implementations
 of the <tt>Map</tt> interface.</p>

 <p><b>Warning:</b>: Because this method must compare the actual
 values stored in the map, and the values in a file, this method can
 be quite slow.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>equals</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>equals</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>o</code> - object to be compared for equality with this map.</dd>
<dt><span class="strong">Returns:</span></dt><dd><tt>true</tt> if the specified object is equal to this map.</dd></dl>
</li>
</ul>
<a name="get(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&nbsp;get(java.lang.Object&nbsp;key)</pre>
<div class="block"><p>Returns the value associated with the the specified key.  Returns
 <tt>null</tt> if the map contains no mapping for this key.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>get</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>get</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key whose associated value is to be returned.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the value to which this map maps the specified key, or
         <tt>null</tt> if the map contains no mapping for this key.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ClassCastException</code> - if the key is of an inappropriate type for
                              this map.</dd>
<dd><code>java.lang.NullPointerException</code> - key is <tt>null</tt></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#containsKey(java.lang.Object)"><code>containsKey(Object)</code></a></dd></dl>
</li>
</ul>
<a name="hashCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hashCode</h4>
<pre>public&nbsp;int&nbsp;hashCode()</pre>
<div class="block"><p>Returns the hash code value for this map. The hash code of a map
 is defined to be the sum of the hash codes of each entry in the
 map's <tt>entrySet()</tt> view. This ensures that
 <tt>t1.equals(t2)</tt> implies that
 <tt>t1.hashCode()==t2.hashCode()</tt> for any two maps <tt>t1</tt>
 and <tt>t2</tt>, as required by the general contract of
 Object.hashCode.</p>

 <p><b>Warning:</b>: The recommended hash code for each entry in the
 <tt>entrySet()</tt> view is a combination of hash codes for the
 entry's key and the entry's value. (See <tt>java.util.Map.Entry</tt>
 for details.) Because the values in a <tt>FileHashMap</tt> object
 are stored in a file, this method can be quite slow.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>hashCode</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>hashCode</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the hash code value for this map.</dd><dt><span class="strong">See Also:</span></dt><dd><code>Object.hashCode()</code>, 
<code>Object.equals(Object)</code>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#equals(java.lang.Object)"><code>equals(Object)</code></a></dd></dl>
</li>
</ul>
<a name="isValid()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValid</h4>
<pre>public&nbsp;boolean&nbsp;isValid()</pre>
<div class="block">Determine whether the <tt>FileHashMap</tt> is valid or not. Once
 a <tt>FileHashMap</tt> has been closed, it is invalid and can no
 longer be used.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><tt>true</tt> if this object is valid, <tt>false</tt> if not</dd></dl>
</li>
</ul>
<a name="keySet()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keySet</h4>
<pre>public&nbsp;java.util.Set&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>&gt;&nbsp;keySet()</pre>
<div class="block"><p>Returns a <tt>Set</tt> containing all the keys in this map. Since
 the keys are cached in memory, this method is relatively efficient.
 The keys are returned in an order that optimizes sequential access
 to the data file; see the <b>Optimizations</b> section in the main
 class documentation for details.</p>

 <p>The set is backed by the map, so changes to the map are reflected
 in the set. If the map is modified while an iteration over the set
 is in progress, the results of the iteration are undefined. Neither
 the set nor its associated iterator supports any of the
 set-modification methods (e.g., <tt>add()</tt>, <tt>remove()</tt>,
 etc). If you attempt to call any of those methods, the called method
 will throw an <tt>UnsupportedOperationException</tt>.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>keySet</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>keySet</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a set view of the keys contained in this map.</dd></dl>
</li>
</ul>
<a name="put(java.lang.Object,java.lang.Object)">
<!--   -->
</a><a name="put(K, V)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre>public&nbsp;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&nbsp;put(<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>&nbsp;key,
    <a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&nbsp;value)
      throws java.lang.ClassCastException,
             java.lang.IllegalArgumentException,
             java.lang.NullPointerException</pre>
<div class="block"><p>Associates the specified value with the specified key in this map.
 If the map previously contained a mapping for this key, the old
 value is replaced. This map class does not permit a null value to be
 stored.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>put</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>put</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key with which the specified value is to be associated.</dd><dd><code>value</code> - value to be associated with the specified key.</dd>
<dt><span class="strong">Returns:</span></dt><dd>previous value associated with specified key, or <tt>null</tt>
         if there was no mapping for key.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ClassCastException</code> - if the class of the specified key or
                                   value prevents it from being stored
                                   in this map.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - Value not serializable, or I/O error
                                   while attempting to serialize value.</dd>
<dd><code>java.lang.NullPointerException</code> - the specified key or value is
                                   <tt>null</tt>.</dd></dl>
</li>
</ul>
<a name="remove(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&nbsp;remove(java.lang.Object&nbsp;key)</pre>
<div class="block"><p>Removes the mapping for this key from this map, if present.
 <b>Note:</b> The space occupied by the serialized value in the
 data file is <i>not</i> coalesced at this point.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>remove</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>remove</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key whose mapping is to be removed from the map.</dd>
<dt><span class="strong">Returns:</span></dt><dd>previous value associated with specified key, or <tt>null</tt>
         if there was no mapping for key.</dd></dl>
</li>
</ul>
<a name="save()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre>public&nbsp;void&nbsp;save()
          throws java.io.IOException,
                 java.io.NotSerializableException</pre>
<div class="block"><p>Save any in-memory index changes to disk without closing the map.
 You can call this method even if the map is marked as temporary;
 on a temporary map, <tt>save()</tt> simply returns without doing
 anything.</p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Error saving changes to disk.</dd>
<dd><code>java.io.NotSerializableException</code> - Can't save index because it contains
                                  one or more objects that cannot be
                                  serialized.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#close()"><code>close()</code></a></dd></dl>
</li>
</ul>
<a name="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()</pre>
<div class="block"><p>Returns the number of key-value mappings in this map. If the map
 contains more than <tt>Integer.MAX_VALUE</tt> elements, returns
 <tt>Integer.MAX_VALUE</tt>. This method queries the in-memory key
 index, so it is relatively efficient.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>size</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>size</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of key-value mappings in this map.</dd></dl>
</li>
</ul>
<a name="values()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>values</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;&nbsp;values()</pre>
<div class="block"><p>Returns a collection view of the values contained in this map. The
 returned collection is a "thin" view of the values contained in
 this map. The collection contains proxies for the actual disk-resident
 values; the values themselves are not loaded until a
 <tt>Collection</tt> method such as <tt>contains()</tt> is called.</p>

 <p>The collection is backed by the map, so changes to the map are
 reflected in the set. If the map is modified while an iteration over
 the set is in progress, the results of the iteration are undefined.</p>
 The set does not support any of the <tt>add()</tt> methods.</p>

 <p><b>Warning:</b>: The <tt>toArray()</tt> methods can be dangerous,
 since they will attempt to load every value from the data file into
 an in-memory array.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>values</code>&nbsp;in interface&nbsp;<code>java.util.Map&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>values</code>&nbsp;in class&nbsp;<code>java.util.AbstractMap&lt;<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">K</a>,<a href="../../../../org/clapper/util/misc/FileHashMap.html" title="type parameter in FileHashMap">V</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a collection view of the values contained in this map.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/clapper/util/misc/FileHashMap.html#keySet()"><code>keySet()</code></a>, 
<a href="../../../../org/clapper/util/misc/FileHashMap.html#values()"><code>values()</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/clapper/util/misc/EnumerationIterator.html" title="class in org.clapper.util.misc"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/clapper/util/misc/LRUMap.html" title="class in org.clapper.util.misc"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/clapper/util/misc/FileHashMap.html" target="_top">Frames</a></li>
<li><a href="FileHashMap.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_java.util.AbstractMap">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
